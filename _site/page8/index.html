<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Linuxdynasty</title>
<meta name="description" content="What I am up too.">
<meta name="keywords" content="Python, GoLang, automation, scripting, programming, vFense, metrics, monitoring">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://linuxdynasty.github.io/Linuxdynasty/images/abstract-1.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="What I am up too.">
<meta name="twitter:creator" content="@linuxdynasty">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="What I am up too.">
<meta property="og:url" content="http://linuxdynasty.github.io/Linuxdynasty/page8/index.html">
<meta property="og:site_name" content="Linuxdynasty">





<link rel="canonical" href="http://linuxdynasty.github.io/Linuxdynasty/page8/">
<link href="http://linuxdynasty.github.io/Linuxdynasty/feed.xml" type="application/atom+xml" rel="alternate" title="Linuxdynasty Feed">
<link rel="author" href="https://google.com/+AllenSanabria?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://linuxdynasty.github.io/Linuxdynasty/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://linuxdynasty.github.io/Linuxdynasty/images/avatar.jpg" alt="Allen Sanabria photo" class="author-photo">
					<h4>Allen Sanabria</h4>
					<p>DevOps developer who loves programming, monitoring, automation, and metrics.</p>
				</li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/about/">Learn More</a></li>
				<li>
					<a href="mailto:asanabria <@> linuxdynasty dot org"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/linuxdynasty"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+AllenSanabria"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/linuxdynasty"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/linuxdynasty"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/posts/">All Posts</a></li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li><li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="http://linuxdynasty.github.io/Linuxdynasty/images/abstract-1.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Linuxdynasty</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2009-08-14T16:48:49-04:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/clustering/howto-setup-gfs2-with-clustering/">August 14, 2009</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/clustering/howto-setup-gfs2-with-clustering/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/clustering/howto-setup-gfs2-with-clustering/" rel="bookmark" title="HowTo setup GFS2 with Clustering" itemprop="url">HowTo setup GFS2 with Clustering</a></h1>
    
  </header>
  <div class="entry-content">
    <p>In my last project at work, I had to replace NFS with GFS2 and Clustering. So in this tutorial I will show you how to create a Red Hat or CentOS cluster with GFS2. I will also show you how to optimize GFS2 performance in the next HowTo, because you will quickly notice some loss of performance until you do a little optimization first.I will 1st show you how do build a Cluster with GFS2 on the Command Line and in the next tutorial I will show you how to do the same thing using Conga.</p>
<p>In this tutorial I am using 3 CentOS Virtual Machines running CentOS 5.3 in VMware ESX 3.5. For the GFS2 File System I am using a vmdk built with the thick option, that is shared among all the Virtual Machines. You also can use iscsi or fiber... This option is up to you.</p>
<p><span class="attention">Always make sure your iptables (If you know the port's and protocols for clustering, then add it to iptables ) and selinux is OFF. If not you will run into issues.</span></p>
<p>The 3 machines I am using are called</p>
<ul>
<li>gfs1 == 192.168.101.100</li>
<li>gfs2 == 192.168.101.101</li>
<li>gfs3 == 192.168.101.103</li>
</ul>
<p><a id="more"></a><a id="more-215"></a></p>
<p>Since I'm using VMware ESX for the 3 machines above I will also be using vmware for fencing. The info is below for my test setup</p>
<ul>
<li>ESX Host Name == esxtest<br />
ESX IP Address == 192.168.101.50</li>
<li>ESX user login info below<br />
login == esxuser<br />
password == esxpass</li>
<li>ESX admin login info below<br />
login == root<br />
password == esxpass</li>
</ul>
<p>&nbsp;</p>
<p>The 1st command you need to know for creating and modifying your cluster is the '<strong>ccs_tool</strong>' command.</p>
<p>Below I will show you the necessary steps to create a cluster and then the GFS2 filesystem</p>
<ol>
<li>First step is to install the necessary RPM's..<br />
<strong>yum -y install modcluster rgmanager gfs2 gfs2-utils lvm2-cluster cman</strong></li>
<li>Second step is to create a cluster on gfs1<br />
<strong>ccs_tool create GFStestCluster</strong></li>
<li>Now that the cluster is created, we will now need to add the fencing devices.<br />
( For simplicity you can just use fence_manual for each host.. <strong>ccs_tool addfence -C gfs1_ipmi fence_manual</strong> )<br />
But if you are using VMware ESX like I am you should use fence_vmware like so...<br />
<strong>ccs_tool addfence -C gfs1_vmware fence_vmware ipaddr=esxtest login=esxuser passwd=esxpass vmlogin=root vmpasswd=esxpass port="/vmfs/volumes/49086551-c64fd83c-0401-001e0bcd6848/eagle1/gfs1.vmx"</strong><br />
<strong>ccs_tool addfence -C gfs2_vmware fence_vmware ipaddr=esxtest login=esxuser passwd=esxpass vmlogin=root vmpasswd=esxpass port="vmfs/volumes/49086551-c64fd83c-0401-001e0bcd6848/gfs2/gfs2.vmx"</strong><br />
<strong>ccs_tool addfence -C gfs3_vmware fence_vmware ipaddr=esxtest login=esxuser passwd=esxpass vmlogin=root vmpasswd=esxpass port="/vmfs/volumes/49086551-c64fd83c-0401-001e0bcd6848/gfs3/gfs3.vmx"</strong></li>
<li>Now that we added the Fencing devices, it is time to add the nodes..<br />
<strong>ccs_tool addnode -C gfs1 -n 1 -v 1 -f gfs1_vmware<br />
ccs_tool addnode -C gfs2 -n 2 -v 1 -f gfs2_vmware<br />
ccs_tool addnode -C gfs3 -n 3 -v 1 -f gfs3_vmware</strong></li>
<li>Now we need to copy this configuration over to the other 2 nodes from gfs1 or we can run the exact same commands above on the other 2 nodes..<br />
<strong>scp /etc/cluster/cluster.conf root@gfs2:/etc/cluster/cluster.conf<br />
scp /etc/cluster/cluster.conf root@gfs3:/etc/cluster/cluster.conf</strong></li>
<li>You can verify the config on all 3 nodes by running the following commands below..<br />
<strong>ccs_tool lsnode<br />
ccs_tool lsfence</strong></li>
<li>You are ready to proceed with starting up the following daemons on all the nodes in the cluster, once you either copied over the configs or re ran the same commands above on the other 2 nodes<br />
<strong>/etc/init.d/cman start<br />
/etc/init.d/rgmanager start</strong></li>
<li>You can now check the status of your cluster by running the commands below...<strong><br />
clustat<br />
cman_tool status</strong></li>
<li>If you want to test the vmware fencing you can do so by doing the following..<strong> ( </strong>run the command below on the 1st node and use the 2nd node as the node to be fenced<strong> )<br />
fence_vmware -a esxtest -l esxuser -p esxpass -L root -P esxpass -n "/vmfs/volumes/49086551-c64fd83c-0401-001e0bcd6848/gfs2/gfs2.vmx" -v<br />
</strong></li>
<li>Before we start to create the LVM2 volumes and Proceed to GFS2, we will need to enable clustering in LVM2.<br />
<strong>lvmconf --enable-cluster</strong></li>
<li>Now it is time to create the LVM2 Volumes...<br />
<strong>pvcreate MyTestGFS /dev/sdb<br />
vgcreate -c y mytest_gfs2 /dev/sdb<br />
lvcreate -n MyGFS2test -L 5G mytest_gfs2<br />
/etc/init.d/clvmd start</strong></li>
<li>You should now also start <strong>clvmd</strong> on the other 2 nodes..<strong><br />
</strong></li>
<li>Once the above has been completed, you will now need to create the GFS2 file system.. Example below..<br />
mkfs -t &lt;filesystem&gt; -p &lt;locking mechanism&gt; -t &lt;ClusterName&gt;:&lt;PhysicalVolumeName&gt; -j &lt;JournalsNeeded == amount of nodes in cluster&gt; &lt;location of filesystem&gt;<br />
<strong>mkfs -t gfs2 -p lock_dlm -t MyCluster:MyTestGFS -j 4 /dev/mapper/mytest_gfs2-MyGFS2test</strong></li>
<li>All we need to do on the 3 nodes, is to mount the GFS2 file system.<br />
<strong>mount /dev/mapper/mytest_gfs2-MyGFS2test /mnt/<br />
</strong></li>
<li>Once you mounted your GFS2 file system You can the following commands..<strong><br />
gfs2_tool list<br />
gfs2_tool df </strong></li>
</ol>
<p>Now it is time to wrap it up with some final commands...</p>
<ol>
<li>Now that we have a fully functional cluster and a mountable GFS2 file system, we need to make sure all the necessary daemons start up with the cluster..<br />
<strong>chkconfig --level 345 rgmanager on<br />
chkconfig --level 345 clvmd on<br />
chkconfig --level 345 cman on<br />
chkconfig --level 345 gfs2 on</strong></li>
<li>If you want the GFS2 file system to be mounted at startup you can add this to /etc/fstab..<br />
<strong>echo "/dev/mapper/mytest_gfs2-MyGFS2test /GFS gfs2 defaults,noatime,nodiratime 0 0" &gt;&gt; /etc/fstab</strong></li>
</ol>
<p>In the next up coming tutorials I will show you how to do the same as above but with the Red Hat Conga gui and I will also show you how to optimize your GFS2 Cluster setup.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2009-07-14T12:18:45-04:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-install-the-data-protector-6-linux-install-server-on-linux/">July 14, 2009</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-install-the-data-protector-6-linux-install-server-on-linux/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-install-the-data-protector-6-linux-install-server-on-linux/" rel="bookmark" title="How To install the Data Protector 6.+ Linux Install Server on Linux" itemprop="url">How To install the Data Protector 6.+ Linux Install Server on Linux</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Now for those of you who are like me and really do not like reading<br />
long winded PDF Installation guides. Here is the SHORT on how to get<br />
Data Protector Installation server installed on RedHat/CentOS/Suse Linux System.</p>
<p user="true" style="display: none" mce_style="display:none">&nbsp;</p>
<ol>
<li>Download the 2 Data Protector Linux Installer ISO Images from HP's WebSite.</li>
<li>Mount both images on the server you are installing this on<br />
Example... ( <strong>mount -o loop -t iso9660 /root/B6960-10011.iso /mnt1/</strong> )<br />
Example... ( <strong>mount -o loop -t iso9660 /root/B6960-10012.iso /mnt2/</strong> )</li>
<li>Now copy over the contents of DP_DEPOT and LOCAL_INSTALL to a local mount of disc1<br />
Example... ( <strong>mkdir /root/DPINSTALL</strong> )<br />
Example... ( <strong>cp -rf /mnt1/DP_DEPOT /root/DPINSTALL</strong>/</li>
<li>Now copy over the contents of DP_DEPOT from disc2 into /root/DPINSTALL/DP_DEPOT/<br />
Example... ( <strong>cp -rf /mnt2/DP_DEPOT/* DP_DEPOT/</strong> )&nbsp;&nbsp; You will be overiding 2 rpm's, but that is alright</li>
<li>Change over to the DPINSTALL directory and install the RPM's<br />
Example... ( <strong>cd /root/DPINSTALL</strong> )<br />
Example... ( <strong>rpm -ivh *.rpm</strong> )</li>
<li>Almost done..... :)</li>
<li>I'm<br />
assuming you will install clients using SSH Keys. And this is how I<br />
will be showing you on how to get this to work. You can copy over the<br />
example omnirc file and use that one..<br />
Example... ( <strong>cp /opt/omni/.omnirc.TMPL&nbsp; /opt/omni/.omnirc</strong> )</li>
<li>Now you will need to enable the ssh keys option.<br />
Example.... ( open up /opt/omni/.omnirc using your favorite editor ) and modify this line....<br />
<strong>#&nbsp; OB2_SSH_ENABLED=0|1</strong><br />
and change it to....<br />
<strong>OB2_SSH_ENABLED=1</strong></li>
<li>We now need to generate a SSH KEY<br />
Example... ( <strong>ssh-keygen -t rsa -b 2048</strong> )</li>
<li>Once the key is generated ( assuming with&nbsp; out a password ) you now need to copy that key over to the clients that you want Data Protector installed on.<br />
Example... ( <strong>scp /root/.ssh/id_rsa.pub client:/root/.ssh/authorized_keys</strong> ) This is assuming that you have a /root/.ssh/ directory on your clients. If not you will have to create one.
</li>
</ol>
<p user="true" style="display: none" mce_style="display:none">&nbsp;</p>
<p>You are now ready to import the installtion server into your Data<br />
Protector Cell Manager... <span class="attention">VERY IMPORTANT &quot;&quot;&quot;&quot; DNS or your HOST entries<br />
for your Installation Server/Cell Manager/ and all your Clients has to<br />
be correct &quot;&quot;&quot;&quot;</span></p>
<p>&nbsp;</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2009-07-06T15:06:37-04:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-automate-the-install-of-vmware-tools-after-any-kernel-update/">July 06, 2009</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-automate-the-install-of-vmware-tools-after-any-kernel-update/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-automate-the-install-of-vmware-tools-after-any-kernel-update/" rel="bookmark" title="How To automate the install of vmware-tools after any kernel update" itemprop="url">How To automate the install of vmware-tools after any kernel update</a></h1>
    
  </header>
  <div class="entry-content">
    <p>The other day I was installing kernel updates on a few of my Red Hat servers and I ran into a minor nuisance.&nbsp; After each reboot, I no longer had network connectivity on the hosts, that has the updated kernel. I then realized, that vmware-tools was not running on all of those hosts. So after a few manual instance of me running &quot;<strong>vmware-tools-config.pl -d</strong>&quot; and &quot;<strong>/etc/init.d/network restart</strong>&quot;....I decided to automate that, by adding the below into &quot;<strong>/etc/rc.local</strong>&quot; </p>
<pre>rkernel=`uname -r`<br />if [ -e /etc/vmware-tools/not_configured ]; then<br />    echo &quot;vmware-tools not configured for running kernel $rkernel&quot;<br />    echo &quot;running vmware-config-tools.pl&quot;<br />    /usr/bin/vmware-config-tools.pl -d<br />    echo &quot;vmware-tools now compiled for running kernel $rkernel&quot;<br />    echo &quot;restarting networking&quot;<br />    /etc/init.d/network restart<br />    echo &quot;network restarted&quot;<br />    exit 0<br />fi<br />&nbsp;</pre>
<p>&nbsp;After each host rebooted, I now had network connectivity and vmware-tools was running. I hope the above will save you some time. </p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2009-05-09T01:28:35-04:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/linux-dynasty-switch-port-mapper-tool-update-1-9/">May 09, 2009</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/linux-dynasty-switch-port-mapper-tool-update-1-9/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/linux-dynasty-switch-port-mapper-tool-update-1-9/" rel="bookmark" title="Linux Dynasty Switch Port Mapper Tool Update 1.9" itemprop="url">Linux Dynasty Switch Port Mapper Tool Update 1.9</a></h1>
    
  </header>
  <div class="entry-content">
    <p>I'm really excited to introduce Port Report Update 1.9  aka the Switch Port Mapper Tool. We've done quite a few code modifications to the previous release of Port Report. The most important feature we just finish adding to Port Report, is to detect CDP Neighbors during the scan for MAC Addresses or IP Addresses. We are still adding features as the days pass, so please stay tuned....</p>
<p>Revision 1.9<br /> Code changes and Added CDP support..</p>
<ul>
<li>Detect CDP Neighbors during the scan for MAC Addresses or IP Addresses </li>
</ul>
<p>You can download the script <a href="Port-Report-Project/">http://www.linuxdynasty.org/Port-Report-Project/<br /></a>{quickdown:39}</p>
<p><a id="more"></a><a id="more-210"></a></p>
<p> </p>
<p> Here is an example below..</p>
<pre><pre><code>python port_report.py -d switch -c community -m "00 13 20 16 5f f7"<br />Switch Connected to 192.168.101.1<br />SwitchPort = GigabitEthernet10/3<br />SwitchPortSpeed = 1000mb<br />SwitchPortDuplex = fullDuplex<br />SwitchVlan = vlan176<br />SnmpHostName = requestTimedOut<br />SnmpHostDescr = requestTimedOut<br />HostMAC  = 00 13 20 16 5f f7<br />HostIP = 192.168.101.101<br />HostName = Pointer Record Not set for 192.168.101.101<br /><br />Found 00 13 20 16 5f f7 on 192.168.101.5<br /><br />Switch Connected to 192.168.101.5<br />SwitchPort = GigabitEthernet0/24<br />SwitchPortSpeed = 1000mb<br />SwitchPortDuplex = fullDuplex<br />SwitchVlan = vlan176<br />SnmpHostName = No SNMP Access<br />SnmpHostDescr = No SNMP Access<br />HostMAC  = 00 13 20 16 5f f7<br />HostIP = None<br />HostName = None<br /><br />Found 00 13 20 16 5f f7 on 192.168.101.6<br /><br />Switch Connected to 192.168.101.6<br />SwitchPort = GigabitEthernet0/22<br />SwitchPortSpeed = 1000mb<br />SwitchPortDuplex = fullDuplex<br />SwitchVlan = vlan176<br />SnmpHostName = No SNMP Access<br />SnmpHostDescr = No SNMP Access<br />HostMAC  = 00 13 20 16 5f f7<br />HostIP = None<br />HostName = None<br /><br />This MAC 00 13 20 16 5f f7 was finally traced to this switch 192.168.101.6</code> </pre>
<p></p>
</pre>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2009-05-05T08:10:41-04:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/port%20report%20projects/ld-port-report-project/">May 05, 2009</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/port%20report%20projects/ld-port-report-project/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/port%20report%20projects/ld-port-report-project/" rel="bookmark" title="LD Port Report Project aka Switch Port Mapper Tool" itemprop="url">LD Port Report Project aka Switch Port Mapper Tool</a></h1>
    
  </header>
  <div class="entry-content">
    <p>The Port Report Project is essentially a Switch Port Mapper Tool or a Switch Port Mapping Tool like a few other commercial products out there, except The Port Report Project is free. Right now there is no GUI or WEB interface for the project but it is in the works.</p>
<p>This project started off as being a simple 150 line script that did something quite simple... Its only purpose was to find MAC Addresses on a switch. Then I was asked could you also search by IP, so I added that. Now I was asked to search by Port, so I added that. Well you get where this is all going.... My goal now is to build the equivalent of other commercial port mapping tools, but Open Source....</p>
<p>On this page I will be keeping all the updates to this Project, so please keep checking back every now and again for updates.<br />
You can get any revision of the Port Report tool here <a title="title" href="Port-Report-Project/">http://www.linuxdynasty.org/Port-Report-Project/ </a><br />
{quickdown:39}</p>
<p>Any issues with the LD Port Report Project, please discuss here in the<a href="http://linuxdynasty.org/index.php?option=com_agora&amp;id=7&amp;Itemid=7"> forums</a><br />
This script requires, Pysnmp and Pyasn1. If you have python-setuptools, you can install it by running this..<br />
easy_install pysnmp, easy_install pyasn1</p>
<p>Three things you will need for this script to work..</p>
<ol>
<li>Pysnmp</li>
<li>Pyasn1</li>
<li>SNMP Access to the switch you want to talk too and its community string.</li>
</ol>
<div>To make your life easier you should do the following</div>
<ol>
<li>install <a title="title" href="http://pypi.python.org/pypi/setuptools">python-setuptools</a></li>
<li>then run easy_install pysnmp</li>
<li>and easy_install pyasn1</li>
<li>or you can download the 2 modules manually.<br />
<a title="title" href="http://sourceforge.net/projects/pysnmp/">pysnmp</a> and <a title="title" href="http://sourceforge.net/projects/pyasn1/">pyasn1</a></li>
<li>then unzip the 2 files and in each directory run <strong>python setup.py install</strong></li>
</ol>
<p>I am using the following revisions from the python cheese shop pysnmp 4.1.12a and pyasn1 0.0.9a</p>
<div>For revision 1.12 and above..... If you installed <strong>pyasn1</strong> and <strong>pysnmp</strong> using <strong>easy_install</strong>. Please uninstall it now and install the newest revision and run <strong>python setup.py install</strong> Instead of using <strong>easy_install</strong>.<br />
Revision history and Examples below.....</div>
<dl>
<dd>Revision 1.13 10/01/09
<ul>
<li>Fixed line 348 as per christianha. return nmac.lower()<br />
This fix will allow you to pass a MAC in all uppercase and still match though the switch is responding in lowercase.<br />
00 E0 B8 81 E8 B7 will now match 00 e0 b8 81 e8 b7</li>
</ul>
<p>Revision 1.12 09/18/09</p>
<ul>
<li>The report option of the script can now follow cdp neighbors using the <strong>--follow</strong> option or <strong>-f</strong>.<br />
When you run the command below it will create ONE CSV file per cdp neighbor it scanned.<br />
I was able to scan from my core Switch down to the last neighbor in the line ( 44 Neighbors in just under 20 minutes. )<br />
Which equaled to a little over 4K Mac Addresses<br />
For instance...port_report.py -d 192.168.101.1 -c public -r -f</li>
</ul>
<p>Revision 1.11 09/13/09</p>
<ul>
<li>More code clean up and another increase in speed.</li>
<li>Also port_report can now follow EtherChannel</li>
</ul>
<ul>
<li>Added better verbosity</li>
<li>Added Sanity Checking for cdp neighbors</li>
</ul>
<p>&nbsp;</p>
<p>Revision 1.10 09/09/09</p>
<ul>
<li>Code Clean up and a slight increase in speed ( by a few seconds ) during the search by mac or ip</li>
</ul>
<p>Revision 1.9<br />
Code changes and Added CDP Support</p>
<ul>
<li>Detect CDP Neighbors during the scan for MAC Addresses or IP Addresses</li>
</ul>
<p>Revision 1.8<br />
Here is a quick update.....</p>
<ul>
<li>I just add dns reverse lookups to the output of this script.</li>
</ul>
<p>Revision 1.7<br />
Adds support to the following devices..</p>
<ol>
<li>Cisco
<ul>
<li>Catalyst 6509 w/ Supervisor 720 running IOS</li>
<li>Catalyst 3560</li>
<li>Catalyst 3550 (SMI)</li>
<li>Cisco CIGESM series Chassis Blades</li>
<li>Cisco Catalyst 2960</li>
</ul>
</li>
<li>Foundry
<ul>
<li>Foundry Server Iron</li>
</ul>
</li>
<li>Nortel
<ul>
<li>Nortel Passport 8600</li>
<li>Nortel 5520 Ethernet Routing Switch</li>
</ul>
</li>
<li>HP
<ul>
<li>HP Procurve 5406xl</li>
</ul>
</li>
</ol>
<p>&nbsp;</p>
<p>Revision 1.6<br />
New additions to this revision ....</p>
<ul>
<li>Support for HP Procurve Switches, ( Tested on the newer versions of HP )</li>
<li>combined switch_report.py in port_report.py.</li>
<li>Added --verbose flag</li>
</ul>
<p>Previous Releases....</p>
<ul>
<li>Search by MAC or IP or PORT</li>
</ul>
</dd>
</dl>
<p>&nbsp;</p>
<p><img title="More..." src="http://linuxdynasty.org/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif" alt="" /></p>
<p>EXAMPLES BELOW...</p>
<p><strong>Below is an example of the integrated CDP following of switches using the -m ( --mac ) option</strong><code></code></p>
<p>&nbsp;</p>
<pre>python port_report.py -d switch -c community -m "00 13 20 16 5f f7" 
Switch Connected to 192.168.101.1 
SwitchPort = GigabitEthernet10/3 
SwitchPortSpeed = 1000mb 
SwitchPortDuplex = fullDuplex 
SwitchVlan = vlan176 
SnmpHostName = requestTimedOut 
SnmpHostDescr = requestTimedOut 
HostMAC = 00 13 20 16 5f f7 
HostIP = 192.168.101.101 
HostName = Pointer Record Not set for 192.168.101.101 

Found 00 13 20 16 5f f7 on 192.168.101.5
Switch Connected to 192.168.101.5 
SwitchPort = GigabitEthernet0/24 
SwitchPortSpeed = 1000mb 
SwitchPortDuplex = fullDuplex 
SwitchVlan = vlan176 
SnmpHostName = No SNMP Access 
SnmpHostDescr = No SNMP Access 
HostMAC = 00 13 20 16 5f f7 
HostIP = None 
HostName = None 

Found 00 13 20 16 5f f7 on 192.168.101.6 
Switch Connected to 192.168.101.6 
SwitchPort = GigabitEthernet0/22 
SwitchPortSpeed = 1000mb 
SwitchPortDuplex = fullDuplex 
SwitchVlan = vlan176 
SnmpHostName = No SNMP Access 
SnmpHostDescr = No SNMP Access 
HostMAC = 00 13 20 16 5f f7 
HostIP = None 
HostName = None 

This MAC 00 13 20 16 5f f7 was finally traced to this switch 192.168.101.6</pre>
<p><strong>Below I will show you an example of the listing of MAC Addresses per Port using the n (--pname) option </strong></p>
<pre>python port_report.py -d 192.168.101.1 -c community -n "10/3"
SwitchPort = GigabitEthernet10/3
SwitchPortSpeed = 1000mb
SwitchPortDuplex = fullDuplex
SwitchVlan = vlan176
SnmpHostName = requestTimedOut
HostDescr = requestTimedOut
HostMAC  = 00 22 64 bb 3e 17
HostIP = 192.168.101.146
HostName = Pointer Record Not set for 192.168.101.146

SwitchPort = GigabitEthernet10/3
SwitchPortSpeed = 1000mb
SwitchPortDuplex = fullDuplex
SwitchVlan = vlan176
SnmpHostName = requestTimedOut
HostDescr = requestTimedOut
HostMAC  = 00 0c f1 bb bf eb
HostIP = 192.168.101.147
HostName = Pointer Record Not set for 192.168.101.147

SwitchPort = GigabitEthernet10/3
SwitchPortSpeed = 1000mb
SwitchPortDuplex = fullDuplex
SwitchVlan = vlan176
SnmpHostName = requestTimedOut
HostDescr = requestTimedOut
HostMAC  = 00 20 4a 83 20 97
HostIP = 192.168.101.30
HostName = Pointer Record Not set for 192.168.101.30</pre>
<p><strong>Below is an example of running the --report option.. Also the report option will save the output to disk in a CSV file. </strong></p>
<pre>python port_report.py -d 192.168.101.5 -c community --report
GigabitEthernet0/1,00 1c c0 12 6a 8b,None,None,vlan180,up,up,fullDuplex,1000mb,
GigabitEthernet0/1,00 20 4a 12 2b 68,None,None,vlan180,up,up,fullDuplex,1000mb,
GigabitEthernet0/1,00 12 44 94 dc 40,192.168.101.132,Pointer Record Not set for 192.168.101.132,vlan180,up,up,fullDuplex,1000mb,
GigabitEthernet0/1,00 21 5a c7 81 16,None,None,vlan180,up,up,fullDuplex,1000mb,
GigabitEthernet0/3,00 20 4a 12 2b 71,None,None,vlan180,up,up,halfDuplex,10mb,</pre>
<p><strong>Below is an example of searching by IP Addresses -i (--ip)..</strong></p>
<pre>python port_report.py -d 192.168.101.1 -c ommunity -i "192.168.101.200"
Switch Connected to 192.168.101.1
SwitchPort = GigabitEthernet1/17
SwitchPortSpeed = 1000mb
SwitchPortDuplex = unknown
SwitchVlan = vlan175
SnmpHostName = zenmon.linuxdynasty.org
SnmpHostDescr = Linux zenmon.linuxdynasty.org 2.6.18-92.1.22.el5 #1 SMP Tue Dec 16 12:03:43 EST 2008 i686HostMAC  = 00 14 38 4f 5e 38HostIP = 192.168.101.200HostName = zenmon.linuxdynasty.org</pre>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="http://linuxdynasty.github.io/Linuxdynasty/page7" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="http://linuxdynasty.github.io/Linuxdynasty">1</a>
      
    </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page3">3</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page4">4</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page5">5</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page6">6</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page7">7</a>
        
      </li>
    
      <li>
        
          <span class="current-page">8</span>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page9">9</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page10">10</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page11">11</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page12">12</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page13">13</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page14">14</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page15">15</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page16">16</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page17">17</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page18">18</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page19">19</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page20">20</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page21">21</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page22">22</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page23">23</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page24">24</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page25">25</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page26">26</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page27">27</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page28">28</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page29">29</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page30">30</a>
        
      </li>
    
  </ul>
  
    <a href="http://linuxdynasty.github.io/Linuxdynasty/page9" class="btn">Next</a>
  
</div><!-- /.pagination -->

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Allen Sanabria. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2333243-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

          

</body>
</html>