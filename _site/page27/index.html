<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Linuxdynasty</title>
<meta name="description" content="What I am up too.">
<meta name="keywords" content="Python, GoLang, automation, scripting, programming, vFense, metrics, monitoring">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://linuxdynasty.github.io/Linuxdynasty/images/abstract-1.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="What I am up too.">
<meta name="twitter:creator" content="@linuxdynasty">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="What I am up too.">
<meta property="og:url" content="http://linuxdynasty.github.io/Linuxdynasty/page27/index.html">
<meta property="og:site_name" content="Linuxdynasty">





<link rel="canonical" href="http://linuxdynasty.github.io/Linuxdynasty/page27/">
<link href="http://linuxdynasty.github.io/Linuxdynasty/feed.xml" type="application/atom+xml" rel="alternate" title="Linuxdynasty Feed">
<link rel="author" href="https://google.com/+AllenSanabria?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://linuxdynasty.github.io/Linuxdynasty/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://linuxdynasty.github.io/Linuxdynasty/images/avatar.jpg" alt="Allen Sanabria photo" class="author-photo">
					<h4>Allen Sanabria</h4>
					<p>DevOps developer who loves programming, monitoring, automation, and metrics.</p>
				</li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/about/">Learn More</a></li>
				<li>
					<a href="mailto:asanabria <@> linuxdynasty dot org"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/linuxdynasty"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+AllenSanabria"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/linuxdynasty"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/linuxdynasty"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/posts/">All Posts</a></li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li><li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="http://linuxdynasty.github.io/Linuxdynasty/images/abstract-1.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Linuxdynasty</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2008-02-10T23:55:18-05:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/ssh-blocking-how-to-using-iptables/">February 10, 2008</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/ssh-blocking-how-to-using-iptables/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/ssh-blocking-how-to-using-iptables/" rel="bookmark" title="SSH Blocking How To using Iptables" itemprop="url">SSH Blocking How To using Iptables</a></h1>
    
  </header>
  <div class="entry-content">
    <p><strong><span style="color: red">This quick how to is for those linux admin/users who have there Linux server accessible to the outside world.</span></strong></p>
<p><strong><span style="color: red">Don't you hate when those bots start hitting you with a ssh dictionary attack??? Well block using IPTABLES.</span></strong></p>
<ol>
<li>
<ul><strong>Here I will show you how to add the first rule in iptables...</strong>
<li>The 1st rule we add is where we tell iptables to create a list called ssh_attempt and store the source ip of every recent ssh attempt on port 22 using tcp on interface eth0. </li>
<li><span style="color: blue">&quot;<strong>iptables -A INPUT -i eth0 -p tcp -m tcp --dport 22 -m state --state NEW -m recent --set --name ssh_attempt --rsource</strong>&quot;</span>
</li>
<li>step by step explanation.. </li>
<li>iptables is the command that you use to enter the firewall rules in. </li>
<li>&quot;<strong><span style="color: blue">-A INPUT</span></strong>&quot; means APPEND to the INPUT chain </li>
<li>&quot;<strong><span style="color: blue">-i eth0</span></strong>&quot; means this rule will use the interface eth0 </li>
<li>&quot;<strong><span style="color: blue">-p tcp</span></strong>&quot; means we are using the TCP protocol </li>
<li>&quot;<strong><span style="color: blue">-m tcp</span></strong>&quot; means we are matching the TCP protocol </li>
<li>&quot;<strong><span style="color: blue">--dport 22</span></strong>&quot; means we are matching based on the destination port 22 </li>
<li>&quot;<strong><span style="color: blue">-m state --state NEW</span></strong>&quot; This rule will only apply to NEW incoming ssh connections not ESTABLISHED or RELATED. </li>
<li>&quot;<strong><span style="color: blue">-m recent --set --name ssh_attempt --rsource</span></strong>&quot; allows us to match packets based on recent events that we have previously matched and sets the name of the list , while saving the source ip address and port. </li>
</ul>
</li>
<li>
<ul><strong>In this step we will show you how to deny those bots..</strong>
<li><span style="color: blue">&quot;<strong>iptables -A INPUT -i eth0 -p tcp -m tcp --dport 22 -m state --state NEW -m recent --update --seconds 10 --hitcount 2 --name ssh_attempt --rsource -j DROP</strong>&quot;</span></li>
<li>The only difference in this rule is these options. </li>
<li>&quot;<strong><span style="color: blue">--update --seconds 10 --hitcount 1 --name ssh_attempt</span></strong>&quot; This will match true if the source is available in the specified list and it also updates the last-seen time in the list. The &quot;<strong><span style="color: blue">--seconds 10</span></strong>&quot; match is used to specify how long since the &quot;last seen&quot;. The &quot;<strong><span style="color: blue">--hitcount 2</span></strong>&quot; will limit the match to only include packets that have seen at least the hitcount amount of packets.</li>
</ul>
</li>
</ol>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2008-02-10T23:52:33-05:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-setup-a-network-interface/">February 10, 2008</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-setup-a-network-interface/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-setup-a-network-interface/" rel="bookmark" title="How to setup a network interface" itemprop="url">How to setup a network interface</a></h1>
    
  </header>
  <div class="entry-content">
    <p><strong><span style="color: red">I will try to make this tutorial as general as possible, as I can give you the REDHAT way of doing things as concerns to where REDHAT base systems maintain there networking files or Gentoo based systems...etc</span></strong></p>
<ol>
<li>
<ul>
Lets start with the basics....
<li>To view all your active network interface<br />
 run this command <span style="color: blue">&quot;<strong>ifconfig</strong>&quot;</span></li>
<pre>  sabayon-dynasty ~ # ifconfig<br />eth0      <br />Link encap:Ethernet  HWaddr 00:0E:35:94:FB:D9<br />inet addr:192.168.101.5  Bcast:192.168.101.255 Mask:255.255.255.0<br />inet6 addr: fe80::20e:35ff:fe94:fbd9/64 Scope:Link<br />UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1<br />RX packets:2656195 errors:0 dropped:19 overruns:0 frame:0<br />TX packets:1762149 errors:0 dropped:0 overruns:0 carrier:0<br />collisions:0 txqueuelen:1000<br />RX bytes:3593125256 (3426.6 Mb)  TX bytes:144856589 (138.1 Mb)<br />Interrupt:10 Base address:0xe000 Memory:e0200000-e0200fff<br />  </pre>
<li>Or you can be specific and run (ifconfig and the interface name)<span style="color: blue">&quot;<strong>ifconfig  eth0</strong>&quot;</span> </li>
</ul>
</li>
<li>
<ul>
Setup your network interfaces!
<li><strong>REDHAT WAY</strong>For redhat based systems you will have to do this (assuming your network interface is eth0 and using DHCP)..<br />
<span style="color: blue">&quot;<strong>vi /etc/sysconfig/network-scripts/ifcfg-eth0</strong>&quot;</span>
<pre>DEVICE=eth0<br />BOOTPROTO=dhcp<br />HWADDR=00:E0:81:24:CQ:82<br />ONBOOT=yes<br />  </pre>
</li>
<li> Now for a static ip setup (assuming eth0)..<br />
<span style="color: blue">&quot;<strong>vi /etc/sysconfig/network-scripts/ifcfg-eth0</strong>&quot;</span>
<pre><br />DEVICE=eth0<br />BROADCAST=192.168.101.255<br />BOOTPROTO=static<br />HWADDR=00:E0:81:24:CQ:82<br />IPADDR=192.168.101.5<br />NETMASK=255.255.255.0<br />NETWORK=192.168.101.0<br />ONBOOT=yes<br />TYPE=Ethernet<br /></pre>
</li>
<li>Now run this <span style="color: blue">&quot;<strong>service network restart</strong>&quot;</span> or run this <span style="color: blue">&quot;<strong>ifdown eth0</strong>&quot;</span> to make sure the interface is down, then <span style="color: blue">&quot;<strong>ifup eth0</strong>&quot;</span> </li>
</ul>
</li>
<li>
<ul><strong>GENTOO WAY</strong>For gentoo based systems you will have to do this.
<li>(assuming your network interface is eth0 and using DHCP)..<br />
<span style="color: blue">&quot;<strong>vi /etc/conf.d/net</strong>&quot;</span>
<pre><br />config_eth0=( &quot;dhcp&quot; )<br />dhcp_eth0=&quot;nosendhost&quot;<br />dns_domain_eth0=&quot;linuxdynasty&quot;<br />  </pre>
</li>
<li>Now for a static ip setup (assuming eth0)..<br />
<span style="color: blue">&quot;<strong>vi /etc/conf.d/net</strong>&quot;</span>
<pre><br />config_eth0=( &quot;192.168.0.2 netmask 255.255.255.0 broadcast 192.168.0.255&quot; )<br />routes_eth0=(&quot;default via 192.168.0.1&quot;)   # IPv4 default route<br />  </pre>
</li>
<li>Now run this <span style="color: blue">&quot;<strong>rc-update add net.eth0 default</strong>&quot;</span> so that it is in the default run level. </li>
<li>Now to get the interface up and running...<br />
<span style="color: blue">&quot;<strong>/etc/init.d/net.eth0 restart</strong>&quot;</span> </li>
</ul>
</li>
</ol>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2008-02-10T23:50:06-05:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/ldap-client-how-to/">February 10, 2008</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/ldap-client-how-to/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/ldap-client-how-to/" rel="bookmark" title="LDAP Client How To" itemprop="url">LDAP Client How To</a></h1>
    
  </header>
  <div class="entry-content">
    <p><strong><span style="color: red"> In this tutorial we will show you how to authenticate to a already configured ldap server</span></strong></p>
<ol>
<li>This file <span style="color: blue">&quot;<strong>/etc/ldap.conf</strong>&quot;</span> is the 1st file that has to be modified as this is the file that tells the system which ldap server to authenticate too.
<pre><br />host yourdomain.com<br />base dc=yourdomain,dc=com<br />uri ldap://yourdomain.com/<br />ldap_version 3<br />rootbinddn cn=Manager,dc=yourdomain,dc=com<br />scope sub<br />timelimit 5<br />bind_timelimit 5<br />nss_reconnect_tries 2<br />pam_login_attribute uid<br />pam_member_attribute gid<br />pam_password md5<br />pam_password exop<br />nss_base_passwd		ou=People,dc=yourdomain,dc=com<br />nss_base_shadow		ou=People,dc=yourdomain,dc=com<br />  </pre>
</li>
<li>Now we have to add the passwd in this file <span style="color: blue">&quot;<strong>/etc/ldap.secret</strong>&quot;</span> so that we can authenticate to the ldap server
<pre>password</pre>
</li>
<li>Now we have to modify this file <span style="color: blue">&quot;<strong>/etc/nsswitch.conf</strong>&quot;</span>
<pre><br />passwd:         files ldap<br />group:          files ldap<br />hosts:          dns ldap<br />services:   ldap [NOTFOUND=return] files<br />networks:   ldap [NOTFOUND=return] files<br />protocols:  ldap [NOTFOUND=return] files<br />rpc:        ldap [NOTFOUND=return] files<br />ethers:     ldap [NOTFOUND=return] files<br />netmasks:   files<br />bootparams: files<br />publickey:  files<br />automount:  files<br />sendmailvars:   files<br />netgroup:   ldap [NOTFOUND=return] files<br />  </pre>
</li>
<li>Now it is time to modify the files in /etc/pam.d/ directory.<br />
First file to be modified is <span style="color: blue">&quot;<strong>/etc/pam.d/login</strong>&quot;</span>
<table border="0">
<tbody>
<tr>
<td width="100">auth</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">account</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">password</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">session</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
</tbody>
</table>
<pre><br />auth            requisite       pam_securetty.so<br />auth            requisite       pam_nologin.so<br />auth            sufficient      pam_ldap.so<br />auth            required        pam_unix.so use_first_pass<br />auth            required        pam_tally.so onerr=succeed file=/var/log/faillog<br />account         required        pam_access.so<br />account         required        pam_time.so<br />account         required        pam_unix.so<br />account         sufficient      pam_ldap.so <br />password        sufficient      pam_ldap.so<br />session         required        pam_mkhomedir.so skel=/etc/skel/ umask=0022<br />session         required        pam_unix.so<br />session         required        pam_env.so<br />session         required        pam_motd.so<br />session         required        pam_limits.so<br />session         optional        pam_mail.so dir=/var/spool/mail standard<br />session         sufficient      pam_ldap.so <br />session         optional        pam_lastlog.so<br />  </pre>
</li>
<li>Now we modify <span style="color: blue">&quot;<strong>/etc/pam.d/shadow</strong>&quot;</span><br />
<table border="0">
<tbody>
<tr>
<td width="100">auth</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">account</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">password</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">session</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
</tbody>
</table>
<pre><br />auth            sufficient      pam_rootok.so<br />auth            required        pam_unix.so<br />auth            sufficient      pam_ldap.so use_first_pass<br />account         required        pam_unix.so<br />account         sufficient      pam_ldap.so<br />session         required        pam_unix.so<br />session         sufficient      pam_ldap.so<br />password        sufficient      pam_ldap.so<br />password        required        pam_permit.so<br />  </pre>
</li>
<li>Now we modify <span style="color: blue">&quot;<strong>/etc/pam.d/passwd</strong>&quot;</span><br />
<table border="0">
<tbody>
<tr>
<td width="100">password</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
</tbody>
</table>
<pre><br />password        sufficient      pam_ldap.so <br />password        required        pam_unix.so shadow nullok<br />  </pre>
</li>
<li>Now we modify <span style="color: blue">&quot;<strong>/etc/pam.d/su</strong>&quot;</span><br />
<table border="0">
<tbody>
<tr>
<td width="100">auth</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">account</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">session</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
</tbody>
</table>
<pre><br />auth            sufficient      pam_ldap.so<br />auth            sufficient      pam_rootok.so<br />auth            required        pam_unix.so use_first_pass<br />account         sufficient      pam_ldap.so<br />account         required        pam_unix.so<br />session         sufficient      pam_ldap.so<br />session         required        pam_unix.so<br />  </pre>
</li>
<li>Now we modify <span style="color: blue">&quot;<strong>/etc/pam.d/sudo</strong>&quot;</span><br />
<table border="0">
<tbody>
<tr>
<td width="100">auth</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
</tbody>
</table>
<pre><br />auth            sufficient      pam_ldap.so<br />auth            required        pam_unix.so use_first_pass<br />auth            required        pam_nologin.so<br />  </pre>
</li>
<li>In this file <span style="color: blue">&quot;<strong>/etc/pam.d/sshd</strong>&quot;</span> you have to add 3 entries, one for auth, one for account, and one for session.<br />
<table border="0">
<tbody>
<tr>
<td width="100">auth</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">account</td>
<td width="100">sufficient</td>
<td width="300">pam_ldap.so</td>
</tr>
<tr>
<td width="100">password</td>
<td width="100">required</td>
<td width="300">pam_ldap.so</td>
</tr>
</tbody>
</table>
<pre><br />auth            required        pam_nologin.so<br />auth            sufficient      pam_ldap.so <br />auth            required        pam_env.so<br />auth            required        pam_unix.so use_first_pass<br />account         sufficient      pam_ldap.so<br />account         required        pam_unix.so<br />account         required        pam_time.so<br />password        required        pam_ldap.so <br />password        required        pam_unix.so<br />session         required        pam_mkhomedir.so skel=/etc/skel/ umask=0022<br />session         required        pam_unix_session.so<br />session         sufficient      pam_ldap.so <br />session         required        pam_limits.so<br />  </pre>
</li>
</ol>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2008-02-10T23:45:47-05:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-log-in-iptables/">February 10, 2008</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-log-in-iptables/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-log-in-iptables/" rel="bookmark" title="How to log in IPTABLES" itemprop="url">How to log in IPTABLES</a></h1>
    
  </header>
  <div class="entry-content">
    <p><span style="color: red"><strong>Welcome again to LinuxDynasty.org. In this quick how to, we are going to show you how to get iptables to log when it drops packets</strong>.</span></p>
<ol>
<li>
<ul><strong>In the previous tutorial <a href="SSH_Blocking+-+How_to_block_ssh_attacks_using_iptables">SSH BLOCKING HOW TO</a> we showed you how to drop those pesky ssh attacks, well int his tutorial we are going to show you how to log those attacks. If you have not read the previous tutorial, then please read it now as I am not going to reexplain the options I used for blocking ssh attacks</strong>
<li>Before we get into the iptables rules, lets make sure that what we are doing is going to log. First lets open up &quot;<strong><span style="color: blue">/etc/syslog.conf</span></strong>&quot; and add this entry
<pre><br />kern.*                          /var/log/firewall.log<br />  </pre>
</li>
<li>Now restart your syslog daemon.. &quot;<strong><span style="color: blue">/etc/init.d/syslog restart</span></strong>&quot; (This is ofcourse assuming you are using Fedora or any other redhat base linux) </li>
<li><strong><span style="color: blue">iptables -A INPUT -i eth0 -p tcp -m tcp --dport 22 -m state --state NEW -m recent --set --name ssh_attempt --rsource -j LOG --log-prefix &quot;SSH connection attempt: &quot;</span></strong> </li>
<li>As you can see this &quot;<span style="color: blue"><strong>-j LOG --log-prefix &quot;SSH connection attempt</strong>: &quot;</span>&quot;  was appended to our previous <a href="SSH_Blocking+-+How_to_block_ssh_attacks_using_iptables">SSH BLOCKING HOW TO</a>. This is essentially logging all ssh attempts.</li>
<li>&quot;<strong><span style="color: blue">-j LOG</span></strong>&quot; This means to jump to the LOG chain in iptables. </li>
<li>&quot;<span style="color: blue"><strong>--log-prefix &quot;SSH connection attempt</strong>: &quot;</span>&quot; This is labeling the log with SSH connection attempt: &quot;.</li>
</ul>
</li>
<li>
<ul><strong>That was basic logging, now we will get into some more options in logging.</strong>
<li>Now lets say you want your logging to be more verbose. In iptables we can fix that by adding this entry in the rule.. <strong><span style="color: blue">--log-level 7</span></strong>. This is the highest level of logging (DEBUG LEVEL). </li>
<li>Now what if you logs are getting saturated by the second and overwhelming your processor? Well we can add limits also. Here is an example <strong><span style="color: blue">-m limit --limit 2/second --limit-burst 5</span></strong>. This will limit the logging to 2 entries per second and a max of 5 packets per second. </li>
</ul>
</li>
<li>
<ul><strong>So if we put it all together it would look like this..</strong>
<li><strong><span style="color: blue">iptables -A INPUT -i eth0 -p tcp -m tcp --dport 22 -m state --state NEW -m recent --set --name ssh_attempt --rsource -j LOG --log-level 7 -m limit --limit 2/second --limit-burst 5 --log-prefix &quot;SSH connection attempt: &quot;</span></strong></li>
</ul>
</li>
</ol>
<p><strong>There are a few more options that we can discuss on logging. If anybody wants to see them just leave a comment. If you liked the tutorial also please leave a comment. I will be adding a ULOG howto in the next day or so, which is my preferred way to log in iptables.</strong></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2008-02-10T23:43:44-05:00"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-change-duplexingspeed/">February 10, 2008</a></time></span><span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-change-duplexingspeed/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/how-to-change-duplexingspeed/" rel="bookmark" title="How to change Duplexing/Speed" itemprop="url">How to change Duplexing/Speed</a></h1>
    
  </header>
  <div class="entry-content">
    <p><span style="color: rgb(255, 0, 0)">In this tutorial we will show you how to view your speed/duplexing setting and also changing your duplexing/speed settings</span></p>
<ol>
<li>
<ul>
To view you interface settings, run this..<span style="color: rgb(0, 0, 255)">&quot;<strong>ethtool eth0</strong>&quot;</span>
<pre><br />Settings for eth0:<br />        Supported ports: [ TP MII ]<br />        Supported link modes:   10baseT/Half 10baseT/Full<br />                                100baseT/Half 100baseT/Full<br />        Supports auto-negotiation: Yes<br />        Advertised link modes:  10baseT/Half 10baseT/Full<br />                                100baseT/Half 100baseT/Full<br />        Advertised auto-negotiation: Yes<br />        Speed: 100Mb/s<br />        Duplex: Full<br />        Port: MII<br />        PHYAD: 1<br />        Transceiver: internal<br />        Auto-negotiation: on<br />        Supports Wake-on: g<br />        Wake-on: g<br />        Current message level: 0x00000007 (7)<br />        Link detected: yes<br />  </pre>
<p>&nbsp;</p>
<li>To change your settings for eth0 you will have to do this...<br />
<span style="color: rgb(0, 0, 255)">&quot;<strong>ethtool -s eth1 speed 100 duplex full autoneg off</strong>&quot;</span> </li>
<li><strong>REDHAT</strong>To make these changes permanently you will have to append this <strong><span style="color: rgb(0, 0, 255)">ETHTOOL_OPTS=&quot;speed 100 duplex full autoneg off&quot;</span></strong>to the /etc/sysconfig/network-scripts/ifcfg-eth0 file
<pre><br />DEVICE=eth0<br />BROADCAST=192.168.101.255<br />BOOTPROTO=static<br />HWADDR=00:E0:81:24:CQ:82<br />IPADDR=192.168.101.5<br />NETMASK=255.255.255.0<br />NETWORK=192.168.101.0<br />ONBOOT=yes<br />TYPE=Ethernet<br />ETHTOOL_OPTS=&quot;speed 100 duplex full autoneg off&quot;<br />  </pre>
</li>
</ul>
</li>
</ol>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="http://linuxdynasty.github.io/Linuxdynasty/page26" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="http://linuxdynasty.github.io/Linuxdynasty">1</a>
      
    </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page3">3</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page4">4</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page5">5</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page6">6</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page7">7</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page8">8</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page9">9</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page10">10</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page11">11</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page12">12</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page13">13</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page14">14</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page15">15</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page16">16</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page17">17</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page18">18</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page19">19</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page20">20</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page21">21</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page22">22</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page23">23</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page24">24</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page25">25</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page26">26</a>
        
      </li>
    
      <li>
        
          <span class="current-page">27</span>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page28">28</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page29">29</a>
        
      </li>
    
      <li>
        
          <a href="http://linuxdynasty.github.io/Linuxdynasty/page30">30</a>
        
      </li>
    
  </ul>
  
    <a href="http://linuxdynasty.github.io/Linuxdynasty/page28" class="btn">Next</a>
  
</div><!-- /.pagination -->

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Allen Sanabria. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2333243-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

          

</body>
</html>