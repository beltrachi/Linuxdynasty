<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk &#8211; Linuxdynasty</title>
<meta name="description" content="Scripting, Programing, Automation, Integration, Monitoring, and Projects...">
<meta name="keywords" content="Zenoss, HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://linuxdynasty.github.io/Linuxdynasty/images/">
<meta name="twitter:title" content="HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk">
<meta name="twitter:description" content="Scripting, Programing, Automation, Integration, Monitoring, and Projects...">
<meta name="twitter:creator" content="@linuxdynasty">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk">
<meta property="og:description" content="Scripting, Programing, Automation, Integration, Monitoring, and Projects...">
<meta property="og:url" content="http://linuxdynasty.github.io/Linuxdynasty/zenoss/howto-send-splunk-alerts-to-zenoss-and-make-them-look-like-splunk/">
<meta property="og:site_name" content="Linuxdynasty">





<link rel="canonical" href="http://linuxdynasty.github.io/Linuxdynasty/zenoss/howto-send-splunk-alerts-to-zenoss-and-make-them-look-like-splunk/">
<link href="http://linuxdynasty.github.io/Linuxdynasty/feed.xml" type="application/atom+xml" rel="alternate" title="Linuxdynasty Feed">
<link rel="author" href="https://google.com/+AllenSanabria?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://linuxdynasty.github.io/Linuxdynasty/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://linuxdynasty.github.io/Linuxdynasty/images/avatar.jpg" alt="Allen Sanabria photo" class="author-photo">
					<h4>Allen Sanabria</h4>
					<p>DevOps developer who loves programming, monitoring, automation, and metrics.</p>
				</li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/about/">Learn More</a></li>
				<li>
					<a href="mailto:asanabria <@> linuxdynasty dot org"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/linuxdynasty"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+AllenSanabria"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/linuxdynasty"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/linuxdynasty"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/posts/">All Posts</a></li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li><li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/zenoss/howto-send-splunk-alerts-to-zenoss-and-make-them-look-like-splunk/" rel="bookmark" title="HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk">HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk</a></h1>
        
        <h2>August 03, 2010</h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~2 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>We needed to integrate the Splunk Alerts into Zenoss, because even though Splunk can indeed send out alerts. Splunk does not have any clue about what an "Escalation Process" is. With Zenoss you can create an "Escalation Process".</p>
<p>I have 2 ways to send events to Zenoss from Splunk..</p>
<ol>
<li>Write a Script that uses the snmptrap command.</li>
<li>Write a Script that uses the Zenoss zensendevent command.</li>
</ol>
<p>I decided to go with the Zenoss zensendevent command ( Which is a python script with no external dependencies, which can be copied from the Zenoss Server at $ZENHOME/bin/zensendevent ).</p>
<p>Now it's time to get the ball rolling..</p>
<ol>
<li>On the Splunk Server I copied the zensendevent script from the Zenoss Server to Splunk on /opt/splunk/bin/scripts/zensendevent.</li>
<li>I then created a shell script called Splunk2Zenoss.sh. ( This script takes the Saved Splunk Search and passes it over to Zenoss )This script will also be located in /opt/splunk/bin/scripts/Splunk2Zenoss.sh</li>
<li>You will then need to modify the options in the script. (For instance the severity of the alert, the zenoss server, the event mapping, event key, login and passwd )</li>
<li>I then created the saved search in Splunk and make sure to check the Trigger Shell Script option. ( Make sure to put the script name in here )</li>
</ol>
<p><a id="more"></a><a id="more-197"></a></p>
<p><a href="images/stories/Zenoss/SavedSearch.png" rel="shadowbox[0]"><img style="width: 200px; height: 200px;" src="http://linuxdynasty.org/wp-content/themes/twentyten/images/stories/Zenoss/SavedSearch.png" alt="" /></a><a href="images/stories/Zenoss/Splunk2Zenoss.png" rel="shadowbox[0]"><img style="width: 200px; height: 200px;" src="http://linuxdynasty.org/wp-content/themes/twentyten/images/stories/Zenoss/Splunk2Zenoss.png" alt="" /></a><a href="images/stories/Zenoss/Transform ScreenShot.png" rel="shadowbox[0]"><img style="width: 200px; height: 200px;" src="http://linuxdynasty.org/wp-content/themes/twentyten/images/stories/Zenoss/Transform ScreenShot.png" alt="" /></a></p>
<p>I did my best to mimic the Splunk Saved Search Alert that you get by email through Splunk, into Zenoss. As of right now any searches that you have saved, can now be sent to Zenoss by using zensendevent that comes with Zenoss.</p>
<p style="margin-top: 10px; margin-bottom: 15px;"><span class="attention">There are 2 caveats to this though....</span></p>
<ol>
<li>You will need to add to the following ( | fields - _raw ) to all your saved searches, with out the ().</li>
<li>modify zensendevent on line number 170,<br />
from..<br />
field, value = line.split('=')<br />
to..<br />
field, value = line.split('=',1)<br />
The reason for the change above, is because Splunk will send "=" signs in the message output, and zensendevent is splitting by "=". So to get rid if this issue, you set the maxsplit to 1.</li>
</ol>
<p>&nbsp;</p>
<p>Here are ScreenShot Examples of a Splunk Email and a Zenoss Email<br />
<a href="images/stories/Zenoss/ZenossSevereTest1.png" rel="shadowbox[0]"><img style="width: 200px; height: 200px;" src="http://linuxdynasty.org/wp-content/themes/twentyten/images/stories/Zenoss/ZenossSevereTest1.png" alt="" /></a><a href="images/stories/Zenoss/severeTest1_splunk.png" rel="shadowbox[0]"><img style="width: 200px; height: 200px;" src="http://linuxdynasty.org/wp-content/themes/twentyten/images/stories/Zenoss/severeTest1_splunk.png" alt="" /></a></p>
<p>Splunk2Zenoss.sh == {filelink=4}</p>
<p>SplunkTransfor.py == {filelink=5}</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#Zenoss" title="Pages tagged Zenoss" class="tag">Zenoss</a><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#HowTo Send Splunk Alerts To Zenoss" title="Pages tagged HowTo Send Splunk Alerts To Zenoss" class="tag">HowTo Send Splunk Alerts To Zenoss</a><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#And make them Look Like Splunk" title="Pages tagged And make them Look Like Splunk" class="tag">And make them Look Like Splunk</a></span>
        <span><a href="http://linuxdynasty.github.io/Linuxdynasty/zenoss/howto-send-splunk-alerts-to-zenoss-and-make-them-look-like-splunk/" rel="bookmark" title="HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk">HowTo Send Splunk Alerts To Zenoss, And make them Look Like Splunk</a> was published on <span class="entry-date date published updated"><time datetime="2010-08-03T19:42:42-04:00">August 03, 2010</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://linuxdynasty.github.io/Linuxdynasty/download-section-no-longer-requires-you-to-be-a-member/" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://linuxdynasty.github.io/Linuxdynasty/migrated-from-wordpress-to-github-dot-io-pages/" title="Migrated from wordpress to github.io pages">Migrated from wordpress to github.io pages</a></h3>
          <p>I just finished migrating from wordpress, and I love haveing the simplicity of just managing static pages and being able to edit right fr...&hellip; <a href="http://linuxdynasty.github.io/Linuxdynasty/migrated-from-wordpress-to-github-dot-io-pages/">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://linuxdynasty.github.io/Linuxdynasty/blog/years-silence/" title="Two years of silence">Two years of silence</a></h4>
            <span>Published on June 14, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://linuxdynasty.github.io/Linuxdynasty/python/zenoss/redis/howto-check-redis-availability-stats-redis-py-zenoss-python/" title="HowTo check redis availability and get stats using Redis-py, Zenoss, and Python">HowTo check redis availability and get stats using Redis-py, Zenoss, and Python</a></h4>
            <span>Published on March 20, 2012</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Allen Sanabria. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2333243-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'linuxdynasty'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
