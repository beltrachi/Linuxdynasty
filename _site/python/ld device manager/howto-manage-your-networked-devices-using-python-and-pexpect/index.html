<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>HowTo Manage your networked devices using Python and Pexpect &#8211; Linuxdynasty</title>
<meta name="description" content="Scripting, Programing, Automation, Integration, Monitoring, and Projects...">
<meta name="keywords" content="Linux, LD Network manager, Python, Cisco, Pexpect, Python Pexepect">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://linuxdynasty.github.io/Linuxdynasty/images/">
<meta name="twitter:title" content="HowTo Manage your networked devices using Python and Pexpect">
<meta name="twitter:description" content="Scripting, Programing, Automation, Integration, Monitoring, and Projects...">
<meta name="twitter:creator" content="@linuxdynasty">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="HowTo Manage your networked devices using Python and Pexpect">
<meta property="og:description" content="Scripting, Programing, Automation, Integration, Monitoring, and Projects...">
<meta property="og:url" content="http://linuxdynasty.github.io/Linuxdynasty/python/ld%20device%20manager/howto-manage-your-networked-devices-using-python-and-pexpect/">
<meta property="og:site_name" content="Linuxdynasty">





<link rel="canonical" href="http://linuxdynasty.github.io/Linuxdynasty/python/ld%20device%20manager/howto-manage-your-networked-devices-using-python-and-pexpect/">
<link href="http://linuxdynasty.github.io/Linuxdynasty/feed.xml" type="application/atom+xml" rel="alternate" title="Linuxdynasty Feed">
<link rel="author" href="https://google.com/+AllenSanabria?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://linuxdynasty.github.io/Linuxdynasty/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://linuxdynasty.github.io/Linuxdynasty/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://linuxdynasty.github.io/Linuxdynasty/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://linuxdynasty.github.io/Linuxdynasty/images/avatar.jpg" alt="Allen Sanabria photo" class="author-photo">
					<h4>Allen Sanabria</h4>
					<p>DevOps developer who loves programming, monitoring, automation, and metrics.</p>
				</li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/about/">Learn More</a></li>
				<li>
					<a href="mailto:asanabria <@> linuxdynasty dot org"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/linuxdynasty"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://google.com/+AllenSanabria"><i class="fa fa-google-plus"></i> Google+</a>
				</li>
				<li>
					<a href="http://linkedin.com/in/linuxdynasty"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/linuxdynasty"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/posts/">All Posts</a></li>
				<li><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li><li><a href="http://linuxdynasty.github.io/Linuxdynasty"></a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://linuxdynasty.github.io/Linuxdynasty/python/ld%20device%20manager/howto-manage-your-networked-devices-using-python-and-pexpect/" rel="bookmark" title="HowTo Manage your networked devices using Python and Pexpect">HowTo Manage your networked devices using Python and Pexpect</a></h1>
        
        <h2>September 27, 2009</h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~5 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>This is my first release of ldNetDeviceManager.py. The ldNetManager.py tool gives you the ability to manage your network devices with out having to purchase a product like Cisco's LMS or go through the planning phase of deploying a product like func. Each of the tools I mentioned before, only have the ability to manage devices in their realm. Func supports Linux devices and Cisco LMS supports only Cisco devices.</p>
<p>This tool has one goal. And that is to update your devices with out deploying any software to your remote devices. All you need is either telnet or ssh access to your devices and Python2.4 or better with Pexpect installed. Once you have those 2 requirements fullfilled, then you are pretty much ready to go.</p>
<p>You will need Python 2.4 or better and Pexpect. ( has not been tested with Python 3+ )</p>
<p>You can get Python from <a href="http://python.org">http://python.org</a> and Pexpect ( I'm currently using Pexpect 2.3, which you can get from <a href="http://sourceforge.net/projects/pexpect/files/">SourceForge</a>.</p>
<p>Network Device Manager {filelink=14}<br />
For support. please check the forums, <a href="forums/LD_Network_Device_Manager">http://www.linuxdynasty.org/forums/LD_Network_Device_Manager</a> .<br />
Here are the release notes..<br />
Revision .21 10/01/2009</p>
<ul>
<li>Can now save output to a file. using the --save option</li>
</ul>
<p>Revision .20 09/27/2009</p>
<ul>
<li>Support for Cisco Devices and Linux Operating Systems</li>
<li>Support for telnet and ssh or both</li>
<li>Knows if you passed sudo, su, or enable</li>
<li>Can pass either 1 device or multiple devices</li>
<li>Can pass 1 command or multiple commands through a text file.</li>
<li>Can pass 1 device or multiple devices through a text file.</li>
<li>When running show commands on Cisco devices, the script will know to send a ( space bar ) to get more info</li>
</ul>
<p><a id="more"></a><a id="more-219"></a></p>
<p>Here is an example of running LdNetManager.py against 3 of my servers..<br />
In the examples below, you will notice I am not passing a password and I'm using the root account. The script will know if you have ssh keys installed on the remote servers.</p>
<pre>python ldNetDeviceManager.py --login="root" --dlist=gfs.txt --command="chkconfig --level 3 snmpd on" --term="ssh" --outfile list gfs.txt</pre>
<pre>connecting to 192.168.101.107
using ssh root@192.168.101.107
chkconfig --level 3 snmpd on
[root@gfs1 ~]
connecting to 192.168.101.111
using ssh root@192.168.101.111
chkconfig --level 3 snmpd on
[root@gfs2 ~]
connecting to 192.168.101.113
using ssh root@192.168.101.113
chkconfig --level 3 snmpd on
[root@gfs3 ~]
Total host that passed 3
192.168.101.107
192.168.101.111
192.168.101.113
Total host that failed 0
Total host that had either incorrect login or passwords 0
Total host that could not connect 0</pre>
<p>Another example, this example shows that snmpd is set to on ..</p>
<pre>python ldNetDeviceManager.py --login="root" --dlist=gfs.txt --command="chkconfig --list --level 3 |grep snmpd " --term="ssh" --outfile list gfs.txt
connecting to 192.168.101.107
using ssh root@192.168.101.107
chkconfig --list --level 3 |grep snmpd snmpd           0:off   1:off   2:off   3:on    4:off   5:off   6:off
[root@gfs1 ~]
connecting to 192.168.101.111
using ssh root@192.168.101.111
chkconfig --list --level 3 |grep snmpd snmpd           0:off   1:off   2:off   3:on    4:on    5:on    6:off
[root@gfs2 ~]
connecting to 192.168.101.113
using ssh root@192.168.101.113
chkconfig --list --level 3 |grep snmpd snmpd           0:off   1:off   2:off   3:on    4:on    5:on    6:off
[root@gfs3 ~]

Total host that passed 3
192.168.101.107
192.168.101.111
192.168.101.113

Total host that failed 0
Total host that had either incorrect login or passwords 0
Total host that could not connect 0</pre>
<p>Another example. This time logging into Cisco Devices and runnign a show cdp neighbor..</p>
<pre>python ldNetDeviceManager.py -l "localadmin" -p "pass" -D 1host.txt -c "show cdp neighbor" -t "both"  --tout=3 --outfile list 1host.txt
connecting to 192.168.101.6
using ssh localadmin@192.168.101.6

ssh key already in host file
Authenticatedbefore while loop 2
show cdp neighborCapability Codes: R - Router, T - Trans Bridge, B - Source Route Bridge S - Switch, H - Host, I - IGMP, r - Repeater, P - Phone

Device ID        Local Intrfce     Holdtme    Capability  Platform  Port
ID2W_9thFl_South   Gig 0/24          143           T I      AIR-AP113 Fas 02W_4507R Gig 0/1
167          R S I     WS-C4507R Gig 5/14
L_904A_SW3&gt;
connecting to 192.168.101.7
using ssh localadmin@192.168.101.7

TIMED OUT, could not connect to 192.168.101.7

connecting to 192.168.101.8
using ssh localadmin@192.168.101.8

ssh key already in host file
Authenticatedbefore while loop 2
show cdp neighborCapability Codes: R - Router, T - Trans Bridge, B - Source Route Bridge S - Switch, H - Host, I - IGMP, r - Repeater, P - Phone

Device ID        Local Intrfce     Holdtme    Capability  Platform  Port ID
2W_4507R Gig 0/24          136          R S I     WS-C4507R Gig 4/22
L_805A_SW1&gt;
Total host that passed 2192.168.101.6

192.168.101.8

Total host that failed 0
Total host that had either incorrect login or passwords 0
Total host that could not connect 1192.168.101.7</pre>
<p>Here is the default output of ldNetDeviceManager.py</p>
<pre>python ldNetDeviceManager.py-l, --login         Your user name to the device. Example below..     -l 'admin', --login='admin'-p, --passwd        Your password to the device. Example below..      -p 'passwd', --passwd='pass'-e, --enable        Your enable or su or sudo password to the device. Example below..-e 'passwd', --enable='pass'-D, --dlist         List of devices you want to run this script against. Example below..-D '/home/test/switches.txt', --dlist='/home/test/switches.txt'-d, --device        The devices you want to run this script against. Example below..-d '192.168.101.1', --device='192.168.101.1'-C, --clist         List of commands that you want to run ithis script against. Example below..-C '/home/test/commands.txt', --clist='/home/test/commands.txt'-c, --command       The command that you want to run. Example below.. -c '/sbin/netstat -tln', --command='show vlan'-t, --term          What terminal you are going to use (ssh or telnet or both. Example below..-t 'ssh', --term='ssh'-o, --output        The default is to run all the commands with out outputting them, this will enable output-o, --output        -h, --help          The will display this help file                   &lt;

Examples Below..   python ldNetDeviceManager.py -l dynasty -p 'passwd' -d 192.168.101.11 -C './cmd.txt' -t ssh -e 'p@55wd' --output --tout=2
python ldNetDeviceManager.py --login=dynasty --passwd='passwd' --dlist='./switches' --clist='./cmd.txt' --term=both --enable='p@55wd' --output --tout=2
python ldNetDeviceManager.py --login=dynasty --passwd='passwd' --dlist='./switches' --command='service snmpd restart' --term=ssh --enable='p@55wd' --output --tout=2
python ldNetDeviceManager.py -l dynasty -p 'passwd' -d 192.168.101.11 -C './cmd.txt' -t ssh  -o --tout=2
If you have SSH Keys then you do not need to pass a password unless you have to get root access or sudo access. example below..
python ldNetDeviceManager.py -l dynasty -d 192.168.101.11 -C './cmd.txt' -t ssh  -o --tout=2
python ldNetDeviceManager.py -l dynasty -p 'passwd' -d 192.168.101.11 -c 'sudo service snmpd restart' --term=ssh  --output --tout=2</pre>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#Linux" title="Pages tagged Linux" class="tag">Linux</a><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#LD Network manager" title="Pages tagged LD Network manager" class="tag">LD Network manager</a><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#Python" title="Pages tagged Python" class="tag">Python</a><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#Cisco" title="Pages tagged Cisco" class="tag">Cisco</a><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#Pexpect" title="Pages tagged Pexpect" class="tag">Pexpect</a><a href="http://linuxdynasty.github.io/Linuxdynasty/tags/#Python Pexepect" title="Pages tagged Python Pexepect" class="tag">Python Pexepect</a></span>
        <span><a href="http://linuxdynasty.github.io/Linuxdynasty/python/ld%20device%20manager/howto-manage-your-networked-devices-using-python-and-pexpect/" rel="bookmark" title="HowTo Manage your networked devices using Python and Pexpect">HowTo Manage your networked devices using Python and Pexpect</a> was published on <span class="entry-date date published updated"><time datetime="2009-09-27T22:54:56-04:00">September 27, 2009</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="http://linuxdynasty.github.io/Linuxdynasty/about/" title="About Allen Sanabria">Allen Sanabria</a></span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://linuxdynasty.github.io/Linuxdynasty/python/blog/python-and-expect/" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://linuxdynasty.github.io/Linuxdynasty/graph-nginx-status-codes-in-graphite/" title="Graph nginx status codes in Graphite.">Graph nginx status codes in Graphite.</a></h3>
          <p>I'm currently at the tail end of collecting metrics for the current company I work for.We are using a combination of.* [Sensu](http://sen...&hellip; <a href="http://linuxdynasty.github.io/Linuxdynasty/graph-nginx-status-codes-in-graphite/">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://linuxdynasty.github.io/Linuxdynasty/migrated-from-wordpress-to-github-dot-io-pages/" title="Migrated from wordpress to github.io pages">Migrated from wordpress to github.io pages</a></h4>
            <span>Published on September 23, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://linuxdynasty.github.io/Linuxdynasty/blog/years-silence/" title="Two years of silence">Two years of silence</a></h4>
            <span>Published on June 14, 2014</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Allen Sanabria. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://linuxdynasty.github.io/Linuxdynasty/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2333243-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'linuxdynasty'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
